# 动作系统
## 基础动作元素
### 动作的种类
|动作类型|动作元素|标签
| :--: | :--: | :--: |
|移动|前冲、后撤|`基础动作` `移动动作`
|攻击|劈、横砍、刺、挡 `特殊动作`、蓄力|`基础动作` `攻击动作` 
|采集|摸、偷、采集|`基础动作` `采集动作`
## 动作效果
### 基础动作效果(`完成一个动作时间为A_T`)
|组合|动作|前摇时间|后摇时间|无敌帧时间|效果|
| :--: |:--: | :--: | :--: | :--: |:--: |
|`able`| 前冲 |0.2 `A_T` | 0.2 `A_T` | 后摇前0.2 `A_T` |`移动`  |
|`able`| 后撤 | 0.4 `A_T` | 0 | 前摇后0.4 `A_T` | `移动`  |
|`disable`| 停 | 0 | `A_T` | 0 | 不移动，停止当前动作(后摇结束) |
|`able`| 劈 | 0.4 `A_T` | 0.4 `A_T` | 0 | 造成`mg*A_T`伤害，无视`横向防护` |
|`able`| 刺 | 0.2 `A_T` | 0.6 `A_T` | 结束前0.2 `A_T` | 造成`mΔv`伤害 | 
|`able`| 挥砍 | 0.4 `A_T` | 0.4 `A_T` | 0 | 造成`mΔv`伤害，0.5*`横向防护` |
|`able`| 挡 | 0.4 `A_T` | 0.6 `A_T` | 0 | 后摇时无敌，`+mΔv` | 
|`able`| 蓄力 | `A_T` | 0 | 0 | 后续动作判定2次效果 |
|`able`| 摸/采集 | 0.2 `A_T` | 0.6 `A_T` | 后摇前0.2 `A_T` | 采集交互，否则摸交互 |
|`able`| 偷 | 0.2 `A_T` | 0.6 `A_T` | 0 | 后摇前0.2`A_T` |
|`able`| 组合动作 | - | - | - | - |
|`Non-Botton`| 受击 | 0 | `A_T` | 0 | 不移动，停止当前动作(直接结束) | 
|`Non-Botton`| 倒地(站立) | 0 | `A_T` | `A_T` | - | 
### 基础动作花费&要求
|动作|花费|要求|
|:--: | :--: | :--: |
|前冲/后撤|体力`cost` 1|双腿`health`|
|劈/挥砍|体力`cost` 3|单手`health`|
|刺|体力`cost` 2.5|单手`health`，`锐器`|
|挡|体力`cost` 3.5|单手`health`|
|蓄力|体力`cost` 5|双手`health`，双腿`health`|
|摸、偷、采集|体力`cost` 0|单手`health`|
|受击|体力`cost` 1.5| - |
### 基础动作解锁条件
- 初始解锁
    - 前冲、停、采集&摸、蓄力
    - 挡 `特殊角色`
- 特殊解锁

    - |解锁动作|解锁方式 |
      | :--: |:--: |
      |劈|`携带工具采集`木材 |
      |刺|`制作锐器` |
      |偷| 角色标签`阴暗` |
      |挡| 角色标签`巨人文明继承者` |
- 组合解锁
    - |解锁动作|解锁方式 |额外效果
      | :--: |:--: |:--: |
      |组合动作(第一次)|重复任意2动作组合*10|解锁 `锻炼`，根据第一次解锁组合动作类型获得相应角色标签
      |组合动作|`锻炼`|-5*组合动作数 `饥饿度`
### 动作组合规则 (`需考虑实现`)
- 最大组合数 = 5
- 组合后使用条件：子动作中最高要求
- 组合后消耗
    - 全为同种类型组合，消耗 = 子动作消耗之和*1.5
    - 三种类型组合，消耗 = 子动作消耗之和*0.75
    - 三种类型组合，消耗 = 子动作消耗之和*0.9
    - PS：消耗在每个子动作后摇完成后扣除，不足则扣除为0，并执行 `停` 动作
- 组合动作变化
    - 移动+移动 : 前一个动作后摇时间为0
    - 移动+采集 : 后一个动作前摇时间为0
    - 移动+攻击 : 后一个动作前摇时间为0，后摇时间*2
    - 攻击+攻击 ：前一个动作后摇+后一个动作前摇时间为无敌帧，后一个动作后摇时间*2
    - 攻击+移动 ：后一个动作前摇时间为0，后一个动作返还体力消耗(后摇开始时返还)
    - 采集+攻击 ：后一个动作前摇时间为0，`攻击范围` *0.5，无视`防护`
    - 采集+移动 ：后一个动作前摇时间为0
    - 采集+采集 ：后一个动作前摇时间为0，后一个动作判定两次
